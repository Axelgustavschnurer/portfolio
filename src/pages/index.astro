---
import Layout from "@layouts/Layout.astro";
import { pbFetch } from "@functions";

const projects = await pbFetch({
	collection: 'projects',
	sort: 'updated'
})

console.log(projects[2].collectionId)
console.log(projects[2].id)
console.log(projects[2].banner)

---

<Layout 
	title="Home"
	description="Välkommen till min portfolio"
>
	<main>
		<section class="padding-inline-50">
			<container class="margin-inline-auto" style="position: relative; height: 312px;">
				<box></box>
				<article class="margin-inline-300">
					<h1 class="margin-bottom-0 margin-top-200 padding-top-100">Axel Schnürer</h1>
					<small>Frontend develeoper</small> <br />
				</article>
			</container>
		</section>
		<section class="margin-block-500 padding-block-100 padding-inline-50">
			<container-text class="margin-inline-auto">
				<flex class="justify-content-space-between gap-100 flex-wrap-wrap"> {/* TODO: Use grid here */}
					{projects.map((project: any) =>
						<div class="flex-grow-100 padding-50" style="box-shadow: 0 0 .5rem -.25rem rgba(102,168,122); border-radius: .5rem; max-width: 28ch;">
							<flex class="justify-content-center">
								<img src={`https://schnurer.pockethost.io/api/files/${project.collectionId}/${project.id}/${project.banner}`} alt="" style="height: 100px; max-width: 100%; border-radius: .25rem; " />
							</flex>
							<h2 class="margin-block-100" style="text-transform: capitalize; text-align: center; font-weight: 500;">{project.title}</h2>
							<div set:html={project.description} class="text margin-block-100"></div>
							<a href="" class="block padding-25 temp-class" style="color: white; background-color: #292929; text-decoration: none; text-align: center; border-radius: .25rem;">Read more</a>
						</div>	
					)}
				</flex>
				<flex class="justify-content-center margin-block-200">
					<a href="">View all projects</a> 
				</flex>
			</container-text>
		</section>
		<section class="padding-inline-50 padding-block-300" style="background-color: hsl(138, 28%, 80%);">
			<container class="margin-inline-auto">
				<h2 class="margin-0">Work experience</h2>
			</container>
		</section>
		<section class="padding-inline-50 padding-block-300" style="background-color: hsl(138, 28%, 70%);">
			<container-text class="margin-inline-auto">
				<h2 class="margin-0">Education</h2>
				<h3>Linköping university</h3>
				<ul>
					<li>Hållbar utveckling i den globala kontext, 15hp</li>
				</ul>
				<h3>Lund university</h3>
				<ul>
					<li>Biologi: Floristik - fortsättningskurs, 7.5hp</li>
					<li>Biologi: Fältfaunistik, 7.5hp</li>
				</ul>
				<h3>Swedish University of Agricultural Sciences</h3>
				<ul>
					<li>Grundläggande floristik och leddjursfaunistik i ett växtskydds- och naturvårdsperspektiv, 7.5hp</li>
					<li>Ekologi och miljövetenskap, 7.5hp</li>
					<li>Fältkurs i växtproduktion, 7.5hp</li>
				</ul>
				<h3>Uppsala university</h3>
				<ul>
					<li>Programmeringsteknik I,5hp</li>
					<li>Naturvård och biologisk mångfald, 10hp</li>
				</ul>
			</container-text>
		</section>
		<section class="padding-inline-50 padding-block-300">
			<container class="margin-inline-auto">
				<h2>Contact</h2>
			</container>
		</section>
	</main>
</Layout>

<style>

	h1 {
		font-size: 3rem;
	}

	small {
		font-size: 1rem;
	}

	box {
		background-image: url('background.jpg');
		background-size: cover;
		width: 100%;
		height: 400px;
		display: block;
		border-radius: .25rem;
		position: absolute;
		top: -85px;
		left: 0;
		z-index: -1;
		box-shadow: 0 0 .5rem -.25rem rgba(102,168,122);
	} 

	box-temp {
		flex-grow: 1;
		height: 200px;
		border-radius: .25rem;
		background-color: rgba(102,168,122);
	}


	.text {
		overflow: hidden;
		display: -webkit-box;
		-webkit-line-clamp: 2; /* number of lines to show */
				line-clamp: 2; 
		-webkit-box-orient: vertical;
	}

	.temp-class:hover {
		background-color: #a86694 !important;
	}

</style>
